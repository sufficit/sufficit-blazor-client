@page "/pages/telephony/monitor/channels"
@attribute [Authorize(Roles = "administrator")]
@inherits MonitorTelephonyBasePageComponent 
@using Microsoft.AspNetCore.Authorization
@using Microsoft.Extensions.Options
@using Sufficit.Blazor.Client.Pages.Telephony
@using Sufficit.Client
@using Sufficit.Telephony
@using Sufficit.Blazor.Client.Models

@if (ErrorConfig != null)
{
    <div class="alert alert-danger mb-0 m-3">
        <h4 class="alert-heading">Erro interno !</h4>
        <p>@ErrorConfig.GetType(): <small>@ErrorConfig.Message</small></p>
    </div>
}

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            @if(Count == 0)
            {
                <div class="card m-1 p-2">                    
                    <HyperText CssClass="blinking">Aguardando canais ....</HyperText>
                </div>
            } else {
                <Table class="table table-flush dataTable-table" id="datatable-search">
                <thead class="thead-light">
                    <tr>
                        <th data-sortable="">
                            <a href="#" class="dataTable-sorter">Canal</a>
                        </th>
                        <th data-sortable="">
                            <a href="#" class="dataTable-sorter">Ínicio</a>
                        </th>                        
                        <th data-sortable="">
                            <a href="#" class="dataTable-sorter">Estado</a>
                        </th>
                        <th data-sortable="">
                            <a href="#" class="dataTable-sorter">Desligado</a>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    @foreach(var Item in @GetItems())
                    {
                        <ChannelsDataItem Item="@Item"></ChannelsDataItem>
                    }                                
                </tbody>
            </Table>
            }
        </div>
    </div>
</div>