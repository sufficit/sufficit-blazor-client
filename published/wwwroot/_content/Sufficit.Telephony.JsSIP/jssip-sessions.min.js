export function Reference(n){DotNetObjectReference=n}export function onJsSIPSession(t){console.debug("onJsSIPSession: ",t);const i=WebPhone._sessions[t.id];i.on("newDTMF",t=>n(i,"newDTMF",t));i.on("newInfo",t=>n(i,"newInfo",t));i.on("hold",t=>n(i,"hold",t));i.on("muted",t=>n(i,"muted",t));i.on("unhold",t=>n(i,"unhold",t));i.on("unmuted",t=>n(i,"unmuted",t));i.on("progress",t=>n(i,"progress",t));i.on("succeeded",t=>n(i,"succeeded",t));i.on("ended",t=>n(i,"ended",t));i.on("confirmed",t=>n(i,"confirmed",t));i.on("connecting",t=>n(i,"connecting",t));i.on("accepted",t=>n(i,"accepted",t));i.on("peerconnection",t=>n(i,"peerconnection",t))}function n(n,t,i){(t==="peerconnection"||t==="connecting")&&n.connection&&n.connection.addEventListener("addstream",u);let f=`on${t.charAt(0).toUpperCase()}${t.slice(1)}`;i.toJSON=r;console.debug(`dispatchSessionEvent: ${f}`,n);DotNetObjectReference.invokeMethodAsync(f,n,i)}function r(){let i=["originator","cause"],t={};for(var n in this)if(i.includes(n)){let i=n;i.startsWith("_")&&(i=i.slice(1));t[i]=this[n]}return t}function u(n){const t=n.stream.getTracks();console.debug("onAddstream, event, tracks: ",n,t);t.forEach(f)}function f(n){let r;if(n.kind==="audio")r=document.getElementById(t),r||(r=document.createElement("audio"),r.id=t,document.body.appendChild(r));else if(n.kind==="video")r=document.getElementById(i),r||(r=document.createElement("video"),r.id=i,document.body.appendChild(r));else{console.error("unknown media stream");return}const u=new MediaStream([n]);"srcObject"in r?r.srcObject=u:r.src=URL.createObjectURL(u);r.play()}export function JsSIPSessionActions(n,t,i){const r=WebPhone._sessions[n.id];switch(t){case"answer":r.answer(i);break;case"terminate":r.terminate();break;case"mute":r.mute(i);break;case"unmute":r.unmute(i);break;case"hold":r.hold();break;case"unhold":r.unhold();break;case"Papayas":console.log("Mangoes and papayas are $2.79 a pound.");break;default:console.log(`sorry, we are out of ${t}.`)}}export var DotNetObjectReference;export const Monitor=async function(n,t){console.debug("monitor session: {id}",n);const i=WebPhone._sessions[n];if(!i)throw new Error("session not found");i.on("newDTMF",n=>t.invokeMethodAsync("OnNewDTMF",n));i.on("newInfo",n=>t.invokeMethodAsync("OnNewInfo",n));i.on("hold",n=>t.invokeMethodAsync("OnHold",n));i.on("muted",n=>t.invokeMethodAsync("OnMuted",n));i.on("unhold",n=>t.invokeMethodAsync("OnUnhold",n));i.on("unmuted",n=>t.invokeMethodAsync("OnUnmuted",n));i.on("progress",n=>t.invokeMethodAsync("OnProgress",n));i.on("accepted",n=>{t.invokeMethodAsync("OnAccepted",n),console.debug("accepted: {status}",i.status)});i.on("succeeded",n=>t.invokeMethodAsync("OnSucceeded",n));i.on("failed",n=>t.invokeMethodAsync("OnFailed",n));i.on("ended",n=>{t.invokeMethodAsync("OnEnded",n),console.debug("ended: ",i.status)});i.on("confirmed",n=>{t.invokeMethodAsync("OnConfirmed",n),console.debug("confirmed: ",i.status)});i.on("connecting",n=>t.invokeMethodAsync("OnConnecting",n));i.on("peerconnection",n=>t.invokeMethodAsync("OnPeerConnection",n))},GetSession=async function(n){return WebPhone._sessions[n]};let t="audio-player-remote",i="media-player-remote";export const Originate=async function(n,t){return WebPhone.call(n,t)},Terminate=function(n){const t=WebPhone._sessions[n];t.terminate()},Answer=async function(n,t){const i=WebPhone._sessions[n];i.answer(t)};